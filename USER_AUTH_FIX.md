# ุฅุตูุงุญ ูุดููุฉ ุงููุตุงุฏูุฉ ูุฅุถุงูุฉ ุงููุณุชุฎุฏููู

## ุงููุดููุฉ
ูุงู ุงููุธุงู ูุณุชุฎุฏู `supabase.auth.admin.createUser` ุงูุฐู ูุชุทูุจ Service Role Key ุบูุฑ ูุชููุฑ ูู ุงูุจูุฆุฉ ุงูุญุงููุฉ.

## ุงูุญู
ุชู ุฅูุดุงุก ุญู ุจุฏูู ูุนูู ุจุฏูู Service Role Key:

### 1. ุงุณุชุฎุฏุงู `signUp` ุงูุนุงุฏู
- ุจุฏูุงู ูู `admin.createUser` ูุณุชุฎุฏู `auth.signUp`
- ูุชู ุฅูุดุงุก ุงููุณุชุฎุฏู ูู ูุธุงู ุงููุตุงุฏูุฉ ุฃููุงู
- ุซู ุชุญุฏูุซ ุฏูุฑู ูู ุฌุฏูู `users`

### 2. Trigger ุชููุงุฆู
- ุชู ุฅูุดุงุก `user_creation_trigger.sql`
- ูููู ุจุฅูุดุงุก ุณุฌู ูู ุฌุฏุงูู `users` ู `profiles` ุชููุงุฆูุงู ุนูุฏ ุงูุชุณุฌูู

### 3. ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู
- loading state ุฃุซูุงุก ุงูุฅูุดุงุก
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงููุตุงุฏูุฉ

## ุฎุทูุงุช ุงูุชุซุจูุช

### 1. ุชุดุบูู ุงูู Trigger ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```sql
-- ุดุบู ูุฐุง ุงูููุฏ ูู Supabase SQL Editor
-- Database > user_creation_trigger.sql
```

### 2. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู
```bash
npm run dev
```

### 3. ุงุฎุชุจุงุฑ ุฅูุดุงุก ุงููุณุชุฎุฏู
1. ุงุฐูุจ ูููุญุฉ ุงูุชุญูู
2. ุงุถุบุท ุนูู ุชุจููุจ "ุงููุณุชุฎุฏููู"
3. ุงุถุบุท ุนูู "ูุณุชุฎุฏู ุฌุฏูุฏ"
4. ุงููุฃ ุงูุจูุงูุงุช ูุงุถุบุท "ุฅูุดุงุก ุงููุณุชุฎุฏู"

## ุงููููุงุช ุงููุญุฏุซุฉ

### `src/lib/userManagementSimple.ts`
- ูุณุฎุฉ ุฌุฏูุฏุฉ ุชุนูู ุจุฏูู Service Role Key
- ุชุณุชุฎุฏู `signUp` ุจุฏูุงู ูู `admin.createUser`

### `src/components/dashboard/UsersManagement.tsx`
- ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ ูุงููุฌุงุญ
- ุฅุถุงูุฉ loading state
- ุงุณุชุฎุฏุงู `userManagementSimple`

### `database/user_creation_trigger.sql`
- Trigger ุชููุงุฆู ูุฅูุดุงุก ุณุฌูุงุช ุงููุณุชุฎุฏููู
- ูุนูู ุนูุฏ ุฃู ุชุณุฌูู ุฌุฏูุฏ

## ููุงุญุธุงุช ูุงูุฉ

### โ ูุง ูุนูู ุงูุขู
- ุฅูุดุงุก ูุณุชุฎุฏููู ุฌุฏุฏ
- ุชุนุฏูู ุจูุงูุงุช ุงููุณุชุฎุฏููู
- ุชุบููุฑ ุฃุฏูุงุฑ ุงููุณุชุฎุฏููู
- ุญุฐู ุงููุณุชุฎุฏููู (soft delete)

### โ๏ธ ูููุฏ ุญุงููุฉ
- ูุง ูููู ุญุฐู ุญุณุงุจ ุงููุตุงุฏูุฉ ููุงุฆูุงู ุจุฏูู Service Role Key
- ุงููุณุชุฎุฏู ุงููุญุฐูู ูุง ูุฒุงู ููุฌูุฏ ูู `auth.users` ููู ูุง ููููู ุงููุตูู ูููุญุฉ ุงูุชุญูู

### ๐ง ุชุญุณููุงุช ูุณุชูุจููุฉ
- ุฅุถุงูุฉ Service Role Key ููุญุฐู ุงููุงูู
- ุฅุฑุณุงู ุจุฑูุฏ ุชุฃููุฏ ูููุณุชุฎุฏููู ุงูุฌุฏุฏ
- ุฅุฏุงุฑุฉ ูููุงุช ุงููุฑูุฑ ูุฅุนุงุฏุฉ ุชุนููููุง

## ุงุฎุชุจุงุฑ ุณุฑูุน

1. **ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ:**
   - ุงูุจุฑูุฏ: `test@example.com`
   - ูููุฉ ุงููุฑูุฑ: `password123`
   - ุงูุฏูุฑ: `customer`
   - ุงูุงุณู: `ูุณุชุฎุฏู ุชุฌุฑูุจู`

2. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
   - ุฑุณุงูุฉ ูุฌุงุญ ุจุงุณู ุงููุณุชุฎุฏู
   - ุธููุฑ ุงููุณุชุฎุฏู ูู ุงููุงุฆูุฉ
   - ูููู ุชุณุฌูู ุงูุฏุฎูู ุจุงูุจูุงูุงุช ุงููุฏุฎูุฉ

## ุงููุณุงุนุฏุฉ ุฅุฐุง ูู ูุนูู

### ุฅุฐุง ุธูุฑ ุฎุทุฃ "User already registered":
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุณุชุฎุฏู ุจุงููุนู
- ุฌุฑุจ ุจุฑูุฏ ุฅููุชุฑููู ุขุฎุฑ

### ุฅุฐุง ุธูุฑ ุฎุทุฃ "Invalid credentials":
- ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
- ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช Supabase ูู `.env`

### ุฅุฐุง ูู ูุธูุฑ ุงููุณุชุฎุฏู ูู ุงููุงุฆูุฉ:
- ุงุถุบุท ุนูู ุฒุฑ "ุชุญุฏูุซ"
- ุงูุชุธุฑ ุจุถุน ุซูุงูู ุซู ุชุญูู ูุฑุฉ ุฃุฎุฑู

---

**ุงูุญู ุฌุงูุฒ ูุงููุธุงู ูุนูู ุงูุขู!** ๐
