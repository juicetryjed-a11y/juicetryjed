// Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
// ØªØ´ØºÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù: node test-database-connection.js

import { createClient } from '@supabase/supabase-js'
import dotenv from 'dotenv'

// ØªØ­Ù…ÙŠÙ„ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
dotenv.config()

const supabaseUrl = process.env.VITE_SUPABASE_URL
const supabaseKey = process.env.VITE_SUPABASE_ANON_KEY

console.log('ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...')
console.log('URL:', supabaseUrl)
console.log('Key:', supabaseKey ? 'Ù…ÙˆØ¬ÙˆØ¯ âœ…' : 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ âŒ')

if (!supabaseUrl || !supabaseKey) {
  console.error('âŒ Ø®Ø·Ø£: Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© ØºÙŠØ± Ù…ÙØ¹Ø¯Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­')
  console.log('ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù .env Ø¨Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØµØ­ÙŠØ­Ø©')
  process.exit(1)
}

const supabase = createClient(supabaseUrl, supabaseKey)

async function testConnection() {
  try {
    console.log('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„...')
    
    // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    const { data, error } = await supabase
      .from('categories')
      .select('count(*)')
      .limit(1)
    
    if (error) {
      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„:', error.message)
      return false
    }
    
    console.log('âœ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†Ø§Ø¬Ø­!')
    
    // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
    const tables = ['profiles', 'categories', 'products', 'orders', 'customer_reviews', 'blog_posts']
    
    for (const table of tables) {
      const { data, error } = await supabase
        .from(table)
        .select('count(*)')
        .limit(1)
      
      if (error) {
        console.log(`âŒ Ø¬Ø¯ÙˆÙ„ ${table}: ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯`)
      } else {
        console.log(`âœ… Ø¬Ø¯ÙˆÙ„ ${table}: Ù…ÙˆØ¬ÙˆØ¯`)
      }
    }
    
    console.log('\nğŸ‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…!')
    return true
    
  } catch (error) {
    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:', error.message)
    return false
  }
}

testConnection()
