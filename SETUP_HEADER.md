# إعداد جدول إعدادات الهيدر

لضمان عمل التحكم في الهيدر من الداشبورد، يجب التأكد من وجود جدول `header_settings` في قاعدة البيانات.

## الخطوات:

1.  افتح لوحة تحكم Supabase الخاصة بمشروعك.
2.  اذهب إلى **SQL Editor**.
3.  انقر على **New Query**.
4.  انسخ محتوى الملف `database/create_header_settings.sql` الموجود في مشروعك.
5.  الصق الكود في محرر SQL في Supabase.
6.  اضغط على **Run**.

## محتوى كود SQL (للنسخ السريع):

```sql
-- Create header_settings table if not exists
CREATE TABLE IF NOT EXISTS public.header_settings (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    show_logo BOOLEAN DEFAULT true,
    logo_url TEXT,
    show_search BOOLEAN DEFAULT true,
    show_cart BOOLEAN DEFAULT true,
    show_user_menu BOOLEAN DEFAULT true,
    navigation_items JSONB DEFAULT '[
        {"id": "1", "label": "الرئيسية", "url": "/", "is_active": true, "order_index": 1},
        {"id": "2", "label": "المنيو", "url": "/menu", "is_active": true, "order_index": 2},
        {"id": "3", "label": "من نحن", "url": "/about", "is_active": true, "order_index": 3},
        {"id": "4", "label": "المقالات", "url": "/blog", "is_active": true, "order_index": 4},
        {"id": "5", "label": "تواصل معنا", "url": "/contact", "is_active": true, "order_index": 5}
    ]'::jsonb,
    header_background TEXT DEFAULT '#ffffff',
    header_text_color TEXT DEFAULT '#1f2937',
    sticky_header BOOLEAN DEFAULT true,
    announcement_bar BOOLEAN DEFAULT false,
    announcement_text TEXT,
    announcement_color TEXT DEFAULT '#22c55e',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- Enable RLS
ALTER TABLE public.header_settings ENABLE ROW LEVEL SECURITY;

-- Drop existing policies to avoid conflicts
DROP POLICY IF EXISTS "Allow public read access" ON public.header_settings;
DROP POLICY IF EXISTS "Allow admin full access" ON public.header_settings;

-- Create policies
CREATE POLICY "Allow public read access" ON public.header_settings FOR SELECT USING (true);
CREATE POLICY "Allow admin full access" ON public.header_settings FOR ALL USING (auth.role() = 'authenticated');

-- Insert default row if not exists
INSERT INTO public.header_settings (id)
SELECT 1
WHERE NOT EXISTS (SELECT 1 FROM public.header_settings);
```

بعد تنفيذ هذا الكود، سيعمل التحكم في الهيدر بشكل كامل من الداشبورد.
